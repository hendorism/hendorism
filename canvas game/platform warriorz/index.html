<!DOCTYPE html>
<html>
<head>
<title>Platform Warriorz</title>
<link rel="stylesheet" type="text/css" href="src/style.css">
</head>
<body>
<a href="../../index.html">HOME</a>
<h1>Welcome to Platform Warriorz</h1>
<p>Get ready to platform!</p>

<div class="gameScreenContainer">
<canvas id="myCanvas" width="900" height="600" style="border:1px solid #d3d3d3;">
    Your browser does not support the HTML5 canvas tag.</canvas>
</div>   

<script src="src/script.js"></script>

<div id="hero"></div>
<script>
    console.log("script hello");
var LEFT_KEY = 37;
var UP_KEY = 38;
var RIGHT_KEY = 39;
var DOWN_KEY = 40;

var HERO_MOVEMENT = 5;

var lastLoopRun = 0;

var hero = new Object();
hero.element = 'hero';
hero.x = 250;
hero.y = 460;

var controller = new Object();

function toggleKey(keyCode, isPressed){
  if (keyCode == LEFT_KEY) {
    controller.left = isPressed;
  }
  if (keyCode == RIGHT_KEY) {
    controller.right = isPressed;
  }
  if (keyCode == UP_KEY) {
    controller.up = isPressed;
  }
  if (keyCode == DOWN_KEY) {
    controller.down = isPressed;
  }
}

function setPosition(sprite){
  var e = document.getElementById(sprite.element);
  e.style.left = sprite.x + 'px';
  e.style.top = sprite.y + 'px';
}

function handleControls() {
  if (controller.up) {
    hero.y -= HERO_MOVEMENT;
  }
  if (controller.down) {
    hero.y += HERO_MOVEMENT;
  }
  if (controller.left) {
    hero.x -= HERO_MOVEMENT;
  }
  if (controller.right) {
    hero.x += HERO_MOVEMENT;
  }
}

function showSprites() {
  setPosition(hero);
}

function loop() {
  if (new Date().getTime() - lastLoopRun > 40) {
    handleControls();
    showSprites();

    lastLoopRun = new Date().getTime();
  }
  setTimeout('loop();', 2);
}

document.onkeydown = function(evt) {
  toggleKey(evt.keyCode, true);
};

document.onkeyup = function(evt) {
  toggleKey(evt.keyCode, false);
};



loop();
console.log("script goodbye");
</script>





</body>
</html>
